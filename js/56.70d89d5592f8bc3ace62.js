webpackJsonp([56],{1075:function(e,t,a){a(1364);var n=a(3)(a(1366),a(1408),"data-v-47492c11",null);e.exports=n.exports},1364:function(e,t,a){var n=a(1365);"string"==typeof n&&(n=[[e.i,n,""]]),a(2)(n,{}),n.locals&&(e.exports=n.locals)},1365:function(e,t,a){(e.exports=a(1)(void 0)).push([e.i,".rechargeStep_main_body .rechargeStep_main_content[data-v-47492c11]{background-color:#f3f3f3;height:43rem}.rechargeStep_main_body .rechargeStep_main_content .account_info[data-v-47492c11]{padding:.3125rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:2.8125rem}.rechargeStep_main_body .rechargeStep_main_content .account_info span[data-v-47492c11]{font-size:17px;color:#707070}.rechargeStep_main_body .rechargeStep_main_content .account_info .red[data-v-47492c11]{color:#e33939}.rechargeStep_main_body .rechargeStep_main_content .account_info .black[data-v-47492c11]{color:#313131}.rechargeStep_main_body .rechargeStep_main_content .account_info img[data-v-47492c11]{width:1.1875rem;vertical-align:bottom}.rechargeStep_main_body .rechargeStep_main_content .choose_sum[data-v-47492c11]{background-color:#fff;padding:.3125rem}.rechargeStep_main_body .rechargeStep_main_content .choose_sum .type_sum[data-v-47492c11]{font-size:18px;color:#707070;height:2.1875rem;line-height:2.1875rem}.rechargeStep_main_body .rechargeStep_main_content .choose_sum .type_sum input[data-v-47492c11]{text-align:center;width:11.25rem;height:1.75rem;border:none;border-bottom:1px solid #a4a4a4}.rechargeStep_main_body .rechargeStep_main_content .choose_sum .recharge_sum[data-v-47492c11]{margin-top:.9375rem;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.rechargeStep_main_body .rechargeStep_main_content .choose_sum .recharge_sum p[data-v-47492c11]{font-size:.875rem;color:#767675;text-align:center;line-height:2.125rem;border:1px solid #eee;border-radius:.1875rem;width:5.625rem;height:2.25rem;margin-bottom:.6875rem;margin-right:.1875rem}.rechargeStep_main_body .rechargeStep_main_content .choose_sum .recharge_sum .selected[data-v-47492c11]{background-color:#f54d42;color:#fff}.rechargeStep_main_body .rechargeStep_main_content .choose_titile[data-v-47492c11]{font-size:.875rem;color:#707070;height:2.1875rem;line-height:2rem;background-color:#f3f3f3;padding:0 .3125rem}.rechargeStep_main_body .rechargeStep_main_content .choose_titile span[data-v-47492c11]{display:inline-block}.rechargeStep_main_body .rechargeStep_main_content .choose_titile span[data-v-47492c11]:first-child{height:.9375rem;width:.9375rem;border:.125rem solid #e33939;border-radius:50%;vertical-align:middle}.rechargeStep_main_body .rechargeStep_main_content .choose_titile span[data-v-47492c11]:last-child{vertical-align:middle}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .transfer_parts[data-v-47492c11]{background-color:#fff;padding:1.25rem;font-size:.9375rem;color:#535353}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .transfer_parts p[data-v-47492c11]{line-height:1.875rem}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .transfer_parts p span[data-v-47492c11]:first-child{display:inline-block;width:6.25rem}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .transfer_parts p span[data-v-47492c11]:nth-child(3){display:inline-block;width:3.3125rem;height:1.4375rem;line-height:1.3125rem;border:.0625rem solid #ff7c34;border-radius:.75rem;text-align:center;color:#ff7c34;margin-left:.625rem}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .transfer_parts p .bank_name[data-v-47492c11]{width:11.125rem;height:1.6875rem;line-height:1.5625rem;border:.0625rem solid #bababa;display:inline-block;border-radius:.1875rem;text-align:center}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .transfer_parts p input[data-v-47492c11]{border:.0625rem solid #bababa;border-radius:.1875rem;outline:none;font-size:.8125rem;text-align:center;width:11.125rem;height:1.6875rem;line-height:1.5625rem}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .transfer_parts p .deposit_num[data-v-47492c11]{width:5.875rem}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .choosed_type[data-v-47492c11]{position:relative;font-size:.9375rem;color:#535353;line-height:1.875rem;height:1.875rem}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .choosed_type span[data-v-47492c11]{display:inline-block;line-height:1.75rem;height:1.875rem;width:100%;border:none;outline:none;border-top:.0625rem solid #e3e3e3;border-bottom:.0625rem solid #e3e3e3;text-align:center;background-color:#fff}.rechargeStep_main_body .rechargeStep_main_content .bank_transfer .choosed_type img[data-v-47492c11]{width:.8125rem;position:absolute;top:.5rem;right:3.125rem}.rechargeStep_main_body .rechargeStep_main_content .transfer_tips[data-v-47492c11]{padding:.625rem 1.25rem;background-color:#fff;font-size:.9375rem;color:#535353;text-align:center}.rechargeStep_main_body .rechargeStep_main_content .transfer_tips img[data-v-47492c11]{width:.9375rem;vertical-align:middle}.rechargeStep_main_body .rechargeStep_main_content .transfer_tips span[data-v-47492c11]{vertical-align:middle}.rechargeStep_main_body .rechargeStep_main_content .transfer_btn[data-v-47492c11]{padding-top:6.25rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:.5rem}.rechargeStep_main_body .rechargeStep_main_content .transfer_btn span[data-v-47492c11]{display:inline-block;width:7.375rem;height:2.1875rem;font-size:1.125rem;color:#fff;text-align:center;background-color:#ff7c34;border-radius:.3125rem;line-height:2.1875rem}.rechargeStep_main_body .rechargeStep_main_content .transfer_btn span[data-v-47492c11]:first-child{margin-right:.3125rem}.rechargeStep_main_body .rechargeStep_main_content .transfer_btn span[data-v-47492c11]:last-child{margin-left:.3125rem}",""])},1366:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(18),i=a.n(n),r=a(1155),o=a.n(r),c=a(1192),s=a(10),h=a(1157),m=a(1193),d=a(290),p=(a.n(d),a(47)),l=a.n(p),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default={components:_({publicHead:o.a},c.a),sockets:{connect:function(){}},computed:_({},Object(s.e)({user_price:function(e){return e.userinfo.accountInfo.price},username:function(e){return e.userinfo.accountInfo.username}})),data:function(){return{specialShow:!0,funcName:"充值",weiView:[],manBankView:[],onlineView:[],showView:0,manData:{},paySuccess:!1,payType:"",rechargeSum:[10,100,300,500,1e3,3e3,5e3,1e4],dynamicFormData:{},active:-1,money:"",temp:0,mapType:new Map([[3,0],[5,1],[11,2]])}},activated:function(){this.payType=parseInt(this.$route.query.payType),this.funcName=this.$route.query.funcName,this.getPayData(),this.getDefaultTips()},methods:_({},Object(s.d)(["SET_BALANCE"]),Object(s.b)(["flushPrice"]),Object(s.b)("recharge",["getDefaultTips"]),{toSuccess:function(){this.temp=this.showView,this.showView=200},toFirstStep:function(){this.specialShow=!0,this.showView=this.temp},controlShow:function(){this.specialShow?this.$router.back():(this.showView=this.temp,this.specialShow=!0)},dealPayData:function(e){switch(this.payType){case 1:this.onlineView=e,this.showView=1;break;case 15:this.manBankView=e,this.showView=2;break;default:this.weiView=e,this.showView=3}},getPayData:function(){var e=this;this.$dialog.loading.open(" "),this.$ajax("request",{ac:"getPayDataByUtype",type:this.payType,https:0==window.location.protocol.indexOf("https")?"1":"0"}).then(function(t){e.dealPayData(t),e.$dialog.loading.close()})},viewItemClick:function(e){if(this.money)switch(this.temp=this.showView,this.specialShow=!1,this.payType){case 1:this.submitPayThrid({type:1,subtype:e.id},e);break;default:this.viewWeiGoPay(e)}else this.$dialog.toast({mes:"请输入正确充值金额！"})},submitPayThrid:function(e,t){var a=this;if(t.hasOwnProperty("is_socket")&&[1,2].includes(t.is_socket))return this.$dialog.loading.open(" "),void(1===t.is_socket?this.doWebScoketPay(t):2===t.is_socket&&this.doHttpPay(t));this.$dialog.loading.open(" ");var n=_({ac:"submitPayThrid",price:this.money,form_unique_token:Object(h.b)()},e);this.$ajax("request",n).then(function(e){var t=e.data.split("&").map(function(e){var t,a=e.split("=>");return(t={})[a[0]]=a[1],t});a.dynamicFormData={url:e.url.replace(/\\\//g,"/"),method:e.method,data:Object.assign.apply(Object,t),qrcode:e.qrcode,money:e.price,showQrcode:!0,show:!0,dingdan:e.dingdan},a.$dialog.loading.close()})},viewWeiGoPay:function(e){e.man||e.bank_card?(e.money=this.money,e.weiType=this.mapType.get(this.payType),this.$router.push({name:"chongzhiwancheng",params:{manData:e,showView:this.showView,money:this.money},query:{payType:this.payType,funcName:this.funcName}})):(this.specialShow=!0,this.submitPayThrid({type:e.type,thrid_id:e.id},e))},showWeiMan1:function(){this.specialShow=!1,this.showView=3,this.manData=this.dynamicFormData,this.manData.weiType=this.mapType.get(this.payType),this.$router.push({name:"chongzhiwancheng",params:{manData:this.dynamicFormData,showView:3,money:this.money}})},chooseSum:function(e,t){this.money=e,this.active=t},refreshUserinfo:function(){var e,t=this;return(e=i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((new Date).getTime()-localStorage.getItem("refresh")>5e3)){e.next=11;break}return localStorage.setItem("refresh",(new Date).getTime()),t.$dialog.loading.open("正在刷新"),e.next=6,t.flushPrice();case 6:e.sent&&t.$dialog.loading.open("刷新成功"),Object(d.setTimeout)(function(){t.$dialog.loading.close()},500),e.next=13;break;case 11:t.$dialog.loading.open("刷新成功"),Object(d.setTimeout)(function(){t.$dialog.loading.close()},500);case 13:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(i,r){try{var o=t[i](r),c=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}("next")})})()},doWebScoketPay:function(e){var t=this,a=this,n={errorRepeatTime:30,url:"ws://"+e.url,data:e.data||e.socket_data,price:a.money,callback:function(e){t.afterWebSocketConnet(e)},errorCallback:function(e){Object(d.setTimeout)(function(){n.errorRepeatTime--,new m.a(n)},2e3)},afterErrorCallback:function(){a.$dialog.toast({mes:"该通道连接超时，请选择其他通道"}),a.$dialog.loading.close()}};new m.a(n)},doHttpPay:function(e){var t=this,a="data="+(e.data||e.socket_data)+"&price="+t.money;l.a.post(e.url,a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.postToPay(e,t)})},afterWebSocketConnet:function(e){if(this.$dialog.loading.close(),e&&e.data){var t=JSON.parse(e.data);0===t.msg&&t.data?this.postToPay(t,this):this.$dialog.toast({mes:t.param})}},postToPay:function(e,t){if(0===e.data.msg){var a=e.data.data,n=a.data.split("&").map(function(e){var t,a=e.split("=>");return(t={})[a[0]]=a[1],t});t.dynamicFormData={url:a.url.replace(/\\\//g,"/"),method:a.method,data:Object.assign.apply(Object,n),qrcode:a.qrcode,money:a.price,showQrcode:!0,show:!0,dingdan:a.dingdan}}else e.data.param?t.$dialog.toast({mes:e.data.param}):t.$dialog.toast({mes:"通道返回数据有误!"});this.$dialog.loading.close()}})}},1408:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rechargeStep_main_body"},[n("publicHead",{attrs:{title:e.funcName,type:5},on:{dontGoBack:e.controlShow}}),e._v(" "),n("div",{staticClass:"rechargeStep_main_content"},[n("div",{staticClass:"account_info"},[n("p",[n("span",[e._v("账号：")]),e._v(" "),n("span",{staticClass:"black"},[e._v(e._s(e.username))])]),e._v(" "),n("p",[n("span",[e._v("余额：")]),e._v(" "),n("span",{staticClass:"red"},[e._v(e._s(e.user_price)+"元")]),e._v(" "),n("img",{attrs:{src:a(1194),alt:""},on:{click:e.refreshUserinfo}})])]),e._v(" "),n("div",{staticClass:"choose_sum"},[n("p",{staticClass:"type_sum"},[n("span",[e._v("充值金额：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.money,expression:"money"}],attrs:{type:"number",placeholder:"请输入充值金额",step:"any"},domProps:{value:e.money},on:{input:function(t){t.target.composing||(e.money=t.target.value)},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("span",[e._v("元")])]),e._v(" "),n("div",{staticClass:"recharge_sum"},e._l(e.rechargeSum,function(t,a){return n("p",{key:a,class:{selected:e.active==a},on:{click:function(n){e.chooseSum(t,a)}}},[e._v("¥"+e._s(t))])}))]),e._v(" "),e._m(0),e._v(" "),n("RechargeStepOnline",{directives:[{name:"show",rawName:"v-show",value:1===e.showView,expression:"showView===1"}],attrs:{data:e.onlineView},on:{clickItem:e.viewItemClick}}),e._v(" "),n("RechargeStepManBank",{directives:[{name:"show",rawName:"v-show",value:2===e.showView,expression:"showView===2"}],attrs:{data:e.manBankView},on:{clickItem:e.viewItemClick}}),e._v(" "),n("RechargeStepWei",{directives:[{name:"show",rawName:"v-show",value:3===e.showView,expression:"showView===3"}],attrs:{data:e.weiView},on:{clickItem:e.viewItemClick}})],1),e._v(" "),n("DynamicForm",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{data:e.dynamicFormData},on:{backstep:e.showWeiMan1}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"choose_titile"},[t("span"),this._v(" "),t("span",[this._v("请选择支付渠道：")])])}]}}});
//# sourceMappingURL=56.70d89d5592f8bc3ace62.js.map?70d89d5592f8bc3ace62